#!/usr/bin/env node

const { spawnSync } = require('child_process');
const { getBinaryPath } = require('./index.js');

try {
  const binaryPath = getBinaryPath();
  const [, , ...args] = process.argv;
  
  const result = spawnSync(binaryPath, args, {
    cwd: process.cwd(),
    stdio: 'inherit'
  });
  
  if (result.error) {
    console.error('Failed to run studio-mcp-server:', result.error.message);
    process.exit(1);
  }
  
  process.exit(result.status || 0);
} catch (error) {
  console.error('studio-mcp-server binary not found:', error.message);
  console.error('\nðŸ”§ If the issue persists, try reinstalling: npm install -g @pulseengine/studio-mcp-server');
  process.exit(1);
}